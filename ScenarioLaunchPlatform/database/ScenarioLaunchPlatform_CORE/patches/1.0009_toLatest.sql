-- 1.00010 changes --
-- 1.0009 changes --
INSERT INTO public.tb_query (id, fk_tb_databaseconnections_id, query_db_type, query_string, query_usecase, query_type, query_description, video_link, query_loop) VALUES (123, 35, 'DDL', 'DROP+TABLE+if+exists+tbl_tmp0%3B%0Acreate+table+tbl_tmp0%28ssn+varchar%2840%29%2C+first_name+varchar%2840%29%2C++last_name+varchar%2840%29%2C+group_name+varchar%2850%29%29%3B%0AALTER+TABLE+tbl_tmp0+ADD+COLUMN+birthdate+DATE%3B%0AALTER+TABLE++tbl_tmp0+DROP+COLUMN+birthdate%3B%0A', 'ALL DDL for tbl_tmp (Schema Tampering)', 'mysql', 'Make sure to have run id 127 to create the users first', '', 20);
INSERT INTO public.tb_query (id, fk_tb_databaseconnections_id, query_db_type, query_string, query_usecase, query_type, query_description, video_link, query_loop) VALUES (124, 35, 'DML', 'delete+from+tbl_tmp0%3B%0A%0Ainsert+into+tbl_tmp0%28ssn+%2C+first_name%2C+last_name%2C+group_name%29+values+%28%27345278446%27%2C%27Thu%27%2C+%27Lett%27%2C%27Gold%27%29%3B%0Ainsert+into+tbl_tmp0%28ssn+%2C+first_name%2C+last_name%2C+group_name%29+values+%28%27543987556%27%2C%27Leah%27%2C+%27Calvo%27%2C%27Silver%27%29%3B%0Ainsert+into+tbl_tmp0%28ssn+%2C+first_name%2C+last_name%2C+group_name%29+values+%28%27778524395%27%2C%27Boris%27%2C+%27Fay%27%2C%27Platinum%27%29%3B%0Ainsert+into+tbl_tmp0%28ssn+%2C+first_name%2C+last_name%2C+group_name%29+values+%28%27125948637%27%2C%27Johana%27%2C+%27Relyea%27%2C%27Blue%27%29%3B%0Ainsert+into+tbl_tmp0%28ssn+%2C+first_name%2C+last_name%2C+group_name%29+values+%28%276544932875%27%2C%27Debi%27%2C%27Winford%27%2C+%27Silver%27%29%3B%0Ainsert+into+tbl_tmp0%28ssn+%2C+first_name%2C+last_name%2C+group_name%29+values+%28%27193756824%27%2C%27Vernice%27%2C+%27Corbin%27%2C%27Gold%27%29%3B%0Ainsert+into+tbl_tmp0%28ssn+%2C+first_name%2C+last_name%2C+group_name%29+values+%28%27485266791%27%2C%27Perry%27%2C+%27Colins%27%2C%27Silver%27%29%3B%0Ainsert+into+tbl_tmp0%28ssn+%2C+first_name%2C+last_name%2C+group_name%29+values+%28%275978824631%27%2C%27Bella%27%2C%27Gastelum%27%2C%27Blue%27%29%3B%0Ainsert+into+tbl_tmp0%28ssn+%2C+first_name%2C+last_name%2C+group_name%29+values+%28%27164959728%27%2C%27Jordon%27%2C%27Polito%27%2C%27Silver%27%29%3B%0Ainsert+into+tbl_tmp0%28ssn+%2C+first_name%2C+last_name%2C+group_name%29+values+%28%27346596782%27%2C%27Irena%27%2C%27Bach%27%2C%27Blue%27%29%3B%0Ainsert+into+tbl_tmp0%28ssn+%2C+first_name%2C+last_name%2C+group_name%29+values+%28%27862495377%27%2C%27Ofir%27%2C%27Levy%27%2C%27Gold%27%29%3B%0Ainsert+into+tbl_tmp0%28ssn+%2C+first_name%2C+last_name%2C+group_name%29+values+%28%27953463735%27%2C%27Mara%27%2C%27Sherrard%27%2C%27Blue%27%29%3B%0Ainsert+into+tbl_tmp0%28ssn+%2C+first_name%2C+last_name%2C+group_name%29+values+%28%27613249578%27%2C%27Craig%27%2C%27Fullmer%27%2C%27Blue%27%29%3B%0Ainsert+into+tbl_tmp0%28ssn+%2C+first_name%2C+last_name%2C+group_name%29+values+%28%27555196666%27%2C%27Mary%27%2C+%27Popkins%27%2C+%27Gold%27%29%3B%0A%0Aupdate+tbl_tmp0+set+ssn+%3D+ssn+%2B+1%3B%0Aupdate+tbl_tmp0+set+ssn+%3D+ssn+%2B+1%3B%0Aupdate+tbl_tmp0+set+ssn+%3D+ssn+%2B+1%3B%0Aupdate+tbl_tmp0+set+ssn+%3D+ssn+%2B+1%3B%0Aupdate+tbl_tmp0+set+ssn+%3D+ssn+%2B+1%3B%0A', 'ALL DML tbl_tmp', 'mysql', 'Make sure to have run id 127 to create the users first', '', 20);
INSERT INTO public.tb_query (id, fk_tb_databaseconnections_id, query_db_type, query_string, query_usecase, query_type, query_description, video_link, query_loop) VALUES (125, 35, 'DQL', 'select+*+from+tbl_tmp0%3B', 'Select From tbl_tmp', 'mysql', 'Make sure to have run id 127 to create the users first', '', 50);
INSERT INTO public.tb_query (id, fk_tb_databaseconnections_id, query_db_type, query_string, query_usecase, query_type, query_description, video_link, query_loop) VALUES (126, 35, 'DCL', 'GRANT+CREATE+USER%2C+DROP+%2C+GRANT+OPTION+ON+*.*+TO+%27Udelia%27%40%27%25%27%3B%0AREVOKE+CREATE+USER%2C+DROP+%2C+GRANT+OPTION+ON+*.*+FROM+%27Udelia%27%40%27%25%27%3B%0AFLUSH+PRIVILEGES%3B', 'Grant Revoke tbl_tmp', 'mysql', 'Make sure to have run id 127 to create the users first', '', 1);
INSERT INTO public.tb_query (id, fk_tb_databaseconnections_id, query_db_type, query_string, query_usecase, query_type, query_description, video_link, query_loop) VALUES (127, 35, 'Insert', 'DROP+USER+IF+EXISTS+%27Udelia%27%40%27%25%27%3B+%0ADROP+USER+IF+EXISTS+%27Ugenio%27%40%27%25%27%3B+%0ADROP+USER+IF+EXISTS+%27Ulick%27%40%27%25%27%3B+%0ADROP+USER+IF+EXISTS+%27Ulrich%27%40%27%25%27%3B+%0ADROP+USER+IF+EXISTS+%27Ultan%27%40%27%25%27%3B+%0ADROP+USER+IF+EXISTS+%27Uma%27%40%27%25%27%3B+%0ADROP+USER+IF+EXISTS+%27Umar%27%40%27%25%27%3B+%0ADROP+USER+IF+EXISTS+%27Una%27%40%27%25%27%3B+%0ADROP+USER+IF+EXISTS+%27Ulysses%27%40%27%25%27%3B+%0A%0ACREATE+USER+IF+NOT+EXISTS+%27Udelia%27%40%27%25%27+IDENTIFIED+BY+%27guardium%27%3B+%0ACREATE+USER+IF+NOT+EXISTS+%27Ugenio%27%40%27%25%27+IDENTIFIED+BY+%27guardium%27%3B+%0ACREATE+USER+IF+NOT+EXISTS+%27Ulick%27%40%27%25%27+IDENTIFIED+BY+%27guardium%27%3B%0ACREATE+USER+IF+NOT+EXISTS+%27Ulrich%27%40%27%25%27+IDENTIFIED+BY+%27guardium%27%3B+%0ACREATE+USER+IF+NOT+EXISTS+%27Ultan%27%40%27%25%27+IDENTIFIED+BY+%27guardium%27%3B+%0ACREATE+USER+IF+NOT+EXISTS+%27Uma%27%40%27%25%27+IDENTIFIED+BY+%27guardium%27%3B%0ACREATE+USER+IF+NOT+EXISTS+%27Umar%27%40%27%25%27+IDENTIFIED+BY+%27guardium%27%3B+%0ACREATE+USER+IF+NOT+EXISTS+%27Una%27%40%27%25%27+IDENTIFIED+BY+%27guardium%27%3B+%0ACREATE+USER+IF+NOT+EXISTS+%27Ulysses%27%40%27%25%27+IDENTIFIED+BY+%27guardium%27%3B%0A%0AGRANT+ALL+PRIVILEGES+ON+*.*+TO+%27Udelia%27%40%27%25%27+WITH+GRANT+OPTION%3B+%0AGRANT+ALL+PRIVILEGES+ON+*.*+TO+%27Ugenio%27%40%27%25%27+WITH+GRANT+OPTION%3B+%0AGRANT+ALL+PRIVILEGES+ON+*.*+TO+%27Ulick%27%40%27%25%27+WITH+GRANT+OPTION%3B+%0AGRANT+ALL+PRIVILEGES+ON+*.*+TO+%27Ulrich%27%40%27%25%27+WITH+GRANT+OPTION%3B+%0AGRANT+ALL+PRIVILEGES+ON+*.*+TO+%27Ultan%27%40%27%25%27+WITH+GRANT+OPTION%3B+%0AGRANT+ALL+PRIVILEGES+ON+*.*+TO+%27Uma%27%40%27%25%27+WITH+GRANT+OPTION%3B+%0AGRANT+ALL+PRIVILEGES+ON+*.*+TO+%27Umar%27%40%27%25%27+WITH+GRANT+OPTION%3B+%0AGRANT+ALL+PRIVILEGES+ON+*.*+TO+%27Una%27%40%27%25%27+WITH+GRANT+OPTION%3B+%0AGRANT+ALL+PRIVILEGES+ON+*.*+TO+%27Ulysses%27%40%27%25%27+WITH+GRANT+OPTION%3B+%0A%0AGRANT+SELECT%2CINSERT%2CUPDATE%2CDELETE%2CDROP%2CEXECUTE+ON+crm.*+TO+%27Udelia%27%40%27%25%27%3B+%0AGRANT+SELECT%2CINSERT%2CUPDATE%2CDELETE%2CDROP%2CEXECUTE+ON+crm.*+TO+%27Ugenio%27%40%27%25%27%3B%0AGRANT+SELECT%2CINSERT%2CUPDATE%2CDELETE%2CDROP%2CEXECUTE+ON+crm.*+TO+%27Ulick%27%40%27%25%27%3B+%0AGRANT+SELECT%2CINSERT%2CUPDATE%2CDELETE%2CDROP%2CEXECUTE+ON+crm.*+TO+%27Ulrich%27%40%27%25%27%3B+%0AGRANT+SELECT%2CINSERT%2CUPDATE%2CDELETE%2CDROP%2CEXECUTE+ON+crm.*+TO+%27Ultan%27%40%27%25%27%3B%0AGRANT+SELECT%2CINSERT%2CUPDATE%2CDELETE%2CDROP%2CEXECUTE+ON+crm.*+TO+%27Uma%27%40%27%25%27%3B+%0AGRANT+SELECT%2CINSERT%2CUPDATE%2CDELETE%2CDROP%2CEXECUTE+ON+crm.*+TO+%27Umar%27%40%27%25%27%3B+%0AGRANT+SELECT%2CINSERT%2CUPDATE%2CDELETE%2CDROP%2CEXECUTE+ON+crm.*+TO+%27Una%27%40%27%25%27%3B%0AGRANT+SELECT%2CINSERT%2CUPDATE%2CDELETE%2CDROP%2CEXECUTE+ON+crm.*+TO+%27Ulysses%27%40%27%25%27%3B+%0A%0AFLUSH+PRIVILEGES%3B', 'Create MySQL UserGroup', 'mysql', 'This creates all the mysql users you use in our stories. Feel free to add more to these. ', '', 1);





INSERT INTO public.tb_query_types (id, query_type) VALUES (13, 'SQL Injection');
INSERT INTO public.tb_query_types (id, query_type) VALUES (14, 'DDL');
INSERT INTO public.tb_query_types (id, query_type) VALUES (15, 'DML');
INSERT INTO public.tb_query_types (id, query_type) VALUES (16, 'DQL');
INSERT INTO public.tb_query_types (id, query_type) VALUES (17, 'DCL');

-- 1.0009 changes -- 
INSERT INTO public.tb_databaseconnections (id, db_connection_id, status, db_type, db_version, db_username, db_password, db_port, db_database, db_url, db_jdbcclassname, db_usericon, db_databaseicon, db_alias, db_access) VALUES (18, 'mysql_127.0.0.1_crm_Udelia', 'active', 'mysql', '', 'Udelia', 'guardium', '3306', 'crm', '127.0.0.1', 'com.mysql.cj.jdbc.Driver', '', '', 'Standard User', 'Select,Update,Insert,Delete,Drop,Execute');
INSERT INTO public.tb_databaseconnections (id, db_connection_id, status, db_type, db_version, db_username, db_password, db_port, db_database, db_url, db_jdbcclassname, db_usericon, db_databaseicon, db_alias, db_access) VALUES (19, 'mysql_127.0.0.1_crm_Ugenio', 'active', 'mysql', '', 'Ugenio', 'guardium', '3306', 'crm', '127.0.0.1', 'com.mysql.cj.jdbc.Driver', '', '', 'Standard User', 'Select,Update,Insert,Delete,Drop,Execute');
INSERT INTO public.tb_databaseconnections (id, db_connection_id, status, db_type, db_version, db_username, db_password, db_port, db_database, db_url, db_jdbcclassname, db_usericon, db_databaseicon, db_alias, db_access) VALUES (20, 'mysql_127.0.0.1_crm_Ulick', 'active', 'mysql', '', 'Ulick', 'guardium', '3306', 'crm', '127.0.0.1', 'com.mysql.cj.jdbc.Driver', '', '', 'Standard User', 'Select,Update,Insert,Delete,Drop,Execute');
INSERT INTO public.tb_databaseconnections (id, db_connection_id, status, db_type, db_version, db_username, db_password, db_port, db_database, db_url, db_jdbcclassname, db_usericon, db_databaseicon, db_alias, db_access) VALUES (21, 'mysql_127.0.0.1_crm_Ulrich', 'active', 'mysql', '', 'Ulrich', 'guardium', '3306', 'crm', '127.0.0.1', 'com.mysql.cj.jdbc.Driver', '', '', 'Standard User', 'Select,Update,Insert,Delete,Drop,Execute');
INSERT INTO public.tb_databaseconnections (id, db_connection_id, status, db_type, db_version, db_username, db_password, db_port, db_database, db_url, db_jdbcclassname, db_usericon, db_databaseicon, db_alias, db_access) VALUES (22, 'mysql_127.0.0.1_crm_Ultan', 'inactive', 'mysql', '', 'Ultan', 'guardium', '3306', 'crm', '127.0.0.1', 'com.mysql.cj.jdbc.Driver', '', '', 'Standard User', 'Select,Update,Insert,Delete,Drop,Execute');
INSERT INTO public.tb_databaseconnections (id, db_connection_id, status, db_type, db_version, db_username, db_password, db_port, db_database, db_url, db_jdbcclassname, db_usericon, db_databaseicon, db_alias, db_access) VALUES (23, 'mysql_127.0.0.1_crm_Ulysses', 'inactive', 'mysql', '', 'Ulysses', 'guardium', '3306', 'crm', '127.0.0.1', 'com.mysql.cj.jdbc.Driver', '', '', 'Standard User', 'Select,Update,Insert,Delete,Drop,Execute');
INSERT INTO public.tb_databaseconnections (id, db_connection_id, status, db_type, db_version, db_username, db_password, db_port, db_database, db_url, db_jdbcclassname, db_usericon, db_databaseicon, db_alias, db_access) VALUES (24, 'mysql_127.0.0.1_crm_Uma', 'inactive', 'mysql', '', 'Uma', 'guardium', '3306', 'crm', '127.0.0.1', 'com.mysql.cj.jdbc.Driver', '', '', 'Standard User', 'Select,Update,Insert,Delete,Drop,Execute');
INSERT INTO public.tb_databaseconnections (id, db_connection_id, status, db_type, db_version, db_username, db_password, db_port, db_database, db_url, db_jdbcclassname, db_usericon, db_databaseicon, db_alias, db_access) VALUES (25, 'mysql_127.0.0.1_crm_Umar', 'inactive', 'mysql', '', 'Umar', 'guardium', '3306', 'crm', '127.0.0.1', 'com.mysql.cj.jdbc.Driver', '', '', 'Standard User', 'Select,Update,Insert,Delete,Drop,Execute');
INSERT INTO public.tb_databaseconnections (id, db_connection_id, status, db_type, db_version, db_username, db_password, db_port, db_database, db_url, db_jdbcclassname, db_usericon, db_databaseicon, db_alias, db_access) VALUES (26, 'mysql_127.0.0.1_crm_Una', 'inactive', 'mysql', '', 'Una', 'guardium', '3306', 'crm', '127.0.0.1', 'com.mysql.cj.jdbc.Driver', '', '', 'Standard User', 'Select,Update,Insert,Delete,Drop,Execute');



CREATE TABLE IF NOT EXISTS public.tb_content_packs
(
    id SERIAL PRIMARY KEY,
    pack_name character varying(255) NOT NULL,
    version character varying(255) NOT NULL,
	db_type character varying(255) NOT NULL,
	build_date character varying(255),
	build_version character varying(255) NOT NULL,
	description character varying(255) NOT NULL,
	author character varying(255),
	icon character varying(255),
	background_traffic character varying(255),
    pack_file_content bytea,
	pack_info jsonb,
	pack_deployed character varying(5) DEFAULT 'false',
	uploaded_date timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
	 -- Unique constraint on pack_name + version
    CONSTRAINT unique_pack_version UNIQUE (pack_name, version)
);

UPDATE public.tb_version SET version = 'v01.0010';